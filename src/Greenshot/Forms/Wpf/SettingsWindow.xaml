<Window x:Class="Greenshot.Forms.Wpf.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wpf="clr-namespace:Greenshot.Base.Wpf;assembly=Greenshot.Base"
        Title="{wpf:Translate settings_title}"
        Width="700" Height="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        MinWidth="600" MinHeight="500"
        Background="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BackgroundBrush}"
        WindowStyle="None"
        AllowsTransparency="False">
    
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="36"
                      CornerRadius="0"
                      GlassFrameThickness="0"
                      NonClientFrameEdges="None"
                      ResizeBorderThickness="5"
                      UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>
    
    <Window.Resources>
        <wpf:ExpertVisibilityConverter x:Key="ExpertVisibilityConverter"/>
        <wpf:FixedToEnabledConverter x:Key="FixedToEnabledConverter"/>
        <wpf:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
        
        <!-- Modern GroupBox Style -->
        <Style TargetType="GroupBox">
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="BorderBrush" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BorderBrush}"/>
            <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
            <Setter Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=GroupBoxBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GroupBox">
                        <Grid>
                            <Border Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="6"
                                    Padding="{TemplateBinding Padding}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <TextBlock Text="{TemplateBinding Header}"
                                               FontWeight="SemiBold"
                                               FontSize="13"
                                               Foreground="{TemplateBinding Foreground}"
                                               Margin="0,0,0,8"/>
                                    <ContentPresenter Grid.Row="1"/>
                                </Grid>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Modern TabControl Style -->
        <Style TargetType="TabControl">
            <Setter Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BackgroundBrush}"/>
            <Setter Property="BorderBrush" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BorderBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="0"/>
        </Style>
        
        <!-- Modern TabItem Style -->
        <Style TargetType="TabItem">
            <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
            <Setter Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=TabItemBackgroundBrush}"/>
            <Setter Property="BorderBrush" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BorderBrush}"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="Margin" Value="0,0,2,0"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border Name="Border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1,1,1,0"
                                CornerRadius="6,6,0,0"
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}">
                            <ContentPresenter ContentSource="Header"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=TabItemSelectedBrush}"/>
                                <Setter Property="Panel.ZIndex" Value="100"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="False">
                                <Setter TargetName="Border" Property="Opacity" Value="0.7"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Opacity" Value="1"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Modern Label Style -->
        <Style TargetType="Label">
            <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <!-- Modern CheckBox Style -->
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
            <Setter Property="Margin" Value="6,3"/>
            <Setter Property="Padding" Value="4,0,0,0"/>
        </Style>
        
        <!-- Modern TextBox Style -->
        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="6,3"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=TextBoxBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
            <Setter Property="BorderBrush" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Modern ComboBox Style -->
        <Style TargetType="ComboBox">
            <Setter Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=TextBoxBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
            <Setter Property="BorderBrush" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BorderBrush}"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Margin" Value="6,3"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton Name="ToggleButton"
                                          Background="{TemplateBinding Background}"
                                          BorderBrush="{TemplateBinding BorderBrush}"
                                          BorderThickness="1"
                                          Focusable="False"
                                          IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                          ClickMode="Press">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border Name="Border"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="4">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition/>
                                                    <ColumnDefinition Width="20"/>
                                                </Grid.ColumnDefinitions>
                                                <Path Grid.Column="1"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      Data="M 0 0 L 4 4 L 8 0 Z"
                                                      Fill="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
                                            </Grid>
                                        </Border>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>
                            <ContentPresenter Name="ContentSite"
                                              IsHitTestVisible="False"
                                              Content="{TemplateBinding SelectionBoxItem}"
                                              ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                              ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                              Margin="8,6,28,6"
                                              VerticalAlignment="Center"
                                              HorizontalAlignment="Left">
                                <ContentPresenter.Resources>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
                                    </Style>
                                </ContentPresenter.Resources>
                            </ContentPresenter>
                            <Popup Name="Popup"
                                   Placement="Bottom"
                                   IsOpen="{TemplateBinding IsDropDownOpen}"
                                   AllowsTransparency="True"
                                   Focusable="False"
                                   PopupAnimation="Slide">
                                <Grid Name="DropDown"
                                      SnapsToDevicePixels="True"
                                      MinWidth="{TemplateBinding ActualWidth}"
                                      MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                    <Border Name="DropDownBorder"
                                            Background="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=TextBoxBackgroundBrush}"
                                            BorderBrush="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="4"
                                            Margin="0,2,0,0">
                                        <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True">
                                            <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained">
                                                <StackPanel.Resources>
                                                    <Style TargetType="ComboBoxItem">
                                                        <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
                                                        <Setter Property="Background" Value="Transparent"/>
                                                        <Setter Property="Padding" Value="8,4"/>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ButtonHoverBrush}"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </StackPanel.Resources>
                                            </StackPanel>
                                        </ScrollViewer>
                                    </Border>
                                </Grid>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Modern Button Style -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ButtonBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
            <Setter Property="BorderBrush" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Name="Border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ButtonHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ButtonPressedBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Modern RadioButton Style -->
        <Style TargetType="RadioButton">
            <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
            <Setter Property="Margin" Value="6,3"/>
        </Style>
        
        <!-- Modern ListView Style -->
        <Style TargetType="ListView">
            <Setter Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=TextBoxBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
            <Setter Property="BorderBrush" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
        
        <!-- Modern ScrollViewer Style -->
        <Style TargetType="ScrollViewer">
            <Setter Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=BackgroundBrush}"/>
        </Style>
        
        <!-- Modern Slider Style -->
        <Style TargetType="Slider">
            <Setter Property="Margin" Value="6,3"/>
        </Style>
        
        <!-- Title Bar Button Style -->
        <Style x:Key="TitleBarButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="46"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" BorderThickness="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ButtonHoverBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Title Bar Close Button Style -->
        <Style x:Key="TitleBarCloseButtonStyle" TargetType="Button" BasedOn="{StaticResource TitleBarButtonStyle}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" BorderThickness="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#E81123"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="36"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Custom Title Bar -->
        <Grid Grid.Row="0" 
              Background="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=TitleBarBrush}"
              MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="36"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Window Icon -->
            <Image Grid.Column="0" 
                   Source="/Greenshot;component/Greenshot.ico"
                   Width="16" Height="16"
                   Margin="10,0,0,0"
                   VerticalAlignment="Center"
                   WindowChrome.IsHitTestVisibleInChrome="False"/>
            
            <!-- Window Title -->
            <TextBlock Grid.Column="1"
                       Text="{wpf:Translate settings_title}"
                       Foreground="{Binding Source={x:Static wpf:ThemeManager.Instance}, Path=ForegroundBrush}"
                       VerticalAlignment="Center"
                       Margin="8,0,0,0"
                       FontSize="13"
                       WindowChrome.IsHitTestVisibleInChrome="False"/>
            
            <!-- Window Controls -->
            <StackPanel Grid.Column="2" 
                        Orientation="Horizontal"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                <Button Content="ðŸ—•" 
                        Click="MinimizeButton_Click"
                        Style="{StaticResource TitleBarButtonStyle}"
                        ToolTip="Minimize"/>
                <Button Content="ðŸ—–" 
                        Click="MaximizeButton_Click"
                        Style="{StaticResource TitleBarButtonStyle}"
                        ToolTip="Maximize"/>
                <Button Content="âœ•" 
                        Click="CloseButton_Click"
                        Style="{StaticResource TitleBarCloseButtonStyle}"
                        ToolTip="Close"/>
            </StackPanel>
        </Grid>
        
    <Grid Grid.Row="1" Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Tab Control -->
        <TabControl Grid.Row="0">
            <!-- General Tab -->
            <TabItem Header="{wpf:Translate settings_general}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <!-- Application Settings -->
                        <GroupBox Header="{wpf:Translate settings_applicationsettings}">
                            <StackPanel>
                                <Grid Margin="0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="{wpf:Translate settings_language}"/>
                                    <ComboBox Grid.Column="1" 
                                              ItemsSource="{Binding SupportedLanguages}"
                                              DisplayMemberPath="Description"
                                              SelectedValuePath="Ietf"
                                              SelectedValue="{Binding SelectedLanguage, Mode=TwoWay}"/>
                                </Grid>
                                
                                <Grid Margin="0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="100"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="{wpf:Translate settings_iconsize}"/>
                                    <Grid Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox Text="{Binding IconSize, Mode=TwoWay}" 
                                                 TextAlignment="Right"
                                                 IsReadOnly="True"/>
                                        <StackPanel Grid.Column="1" Orientation="Vertical" Margin="2,0,0,0">
                                            <Button Content="â–²" Click="IconSizeUp_Click" Padding="4,0" FontSize="8" MinWidth="20" Height="15"/>
                                            <Button Content="â–¼" Click="IconSizeDown_Click" Padding="4,0" FontSize="8" MinWidth="20" Height="15" Margin="0,1,0,0"/>
                                        </StackPanel>
                                    </Grid>
                                </Grid>
                                
                                <CheckBox Content="{wpf:Translate settings_autostartshortcut}"
                                          IsChecked="{Binding AutoStartEnabled, Mode=TwoWay}"/>
                            </StackPanel>
                        </GroupBox>
                        
                        <!-- Hotkeys -->
                        <GroupBox Header="{wpf:Translate hotkeys}">
                            <StackPanel>
                                <Grid Margin="0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <Label Grid.Row="0" Grid.Column="0" Content="{wpf:Translate contextmenu_capturefullscreen}"/>
                                    <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding CoreConfiguration.FullscreenHotkey}"/>
                                    
                                    <Label Grid.Row="1" Grid.Column="0" Content="{wpf:Translate contextmenu_capturewindow}"/>
                                    <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding CoreConfiguration.WindowHotkey}"/>
                                    
                                    <Label Grid.Row="2" Grid.Column="0" Content="{wpf:Translate contextmenu_capturearea}"/>
                                    <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding CoreConfiguration.RegionHotkey}"/>
                                    
                                    <Label Grid.Row="3" Grid.Column="0" Content="{wpf:Translate contextmenu_capturelastregion}"/>
                                    <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding CoreConfiguration.LastregionHotkey}"/>
                                    
                                    <Label Grid.Row="4" Grid.Column="0" Content="{wpf:Translate contextmenu_captureie}"/>
                                    <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding CoreConfiguration.IEHotkey}"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>
                        
                        <!-- Network Settings -->
                        <GroupBox Header="{wpf:Translate settings_network}">
                            <StackPanel>
                                <CheckBox Content="{wpf:Translate settings_usedefaultproxy}"
                                          IsChecked="{Binding CoreConfiguration.UseProxy, Mode=TwoWay}"/>
                                
                                <Grid Margin="0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="250"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="{wpf:Translate settings_checkperiod}"/>
                                    <TextBox Grid.Column="1" Text="{Binding CoreConfiguration.UpdateCheckInterval}"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- Capture Tab -->
            <TabItem Header="{wpf:Translate settings_capture}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="{wpf:Translate settings_capture}">
                            <StackPanel>
                                <CheckBox Content="{wpf:Translate settings_capture_mousepointer}"
                                          IsChecked="{Binding CoreConfiguration.CaptureMousepointer, Mode=TwoWay}"/>
                                <CheckBox Content="{wpf:Translate settings_playsound}"
                                          IsChecked="{Binding CoreConfiguration.PlayCameraSound, Mode=TwoWay}"/>
                                <CheckBox Content="{wpf:Translate settings_shownotify}"
                                          IsChecked="{Binding CoreConfiguration.ShowTrayNotification, Mode=TwoWay}"/>
                                <CheckBox Content="{wpf:Translate settings_zoom}"
                                          IsChecked="{Binding CoreConfiguration.ZoomerEnabled, Mode=TwoWay}"/>
                                
                                <Grid Margin="0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="{wpf:Translate settings_waittime}"/>
                                    <TextBox Grid.Column="1" Text="{Binding CoreConfiguration.CaptureDelay}"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>
                        
                        <GroupBox Header="{wpf:Translate settings_windowscapture}">
                            <StackPanel>
                                <RadioButton Content="{wpf:Translate settings_capture_windows_interactive}"
                                             IsChecked="{Binding CoreConfiguration.CaptureWindowsInteractive, Mode=TwoWay}"/>
                                <Grid Margin="0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <RadioButton Content="{wpf:Translate settings_window_capture_mode}"
                                                 IsChecked="{Binding CoreConfiguration.CaptureWindowsInteractive, Mode=TwoWay, Converter={StaticResource InverseBooleanConverter}}"/>
                                    <ComboBox Grid.Column="1" 
                                              ItemsSource="{Binding WindowCaptureModes}"
                                              DisplayMemberPath="Description"
                                              SelectedValuePath="Value"
                                              SelectedValue="{Binding CoreConfiguration.WindowCaptureMode, Mode=TwoWay}"
                                              IsEnabled="{Binding CoreConfiguration.CaptureWindowsInteractive, Converter={StaticResource InverseBooleanConverter}}"
                                              Margin="10,0,0,0"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- Output Tab -->
            <TabItem Header="{wpf:Translate settings_output}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="{wpf:Translate settings_preferredfilesettings}">
                            <StackPanel>
                                <Grid Margin="0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <Label Grid.Row="0" Grid.Column="0" Content="{wpf:Translate settings_storagelocation}"/>
                                    <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding CoreConfiguration.OutputFilePath}"/>
                                    <Button Grid.Row="0" Grid.Column="2" Content="..." Width="30" Margin="5,0,0,0" Click="BrowseStorageLocation_Click"/>
                                    
                                    <Label Grid.Row="1" Grid.Column="0" Content="{wpf:Translate settings_filenamepattern}"/>
                                    <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding CoreConfiguration.OutputFileFilenamePattern}"/>
                                    <Button Grid.Row="1" Grid.Column="2" Content="?" Width="30" Margin="5,0,0,0" Click="ShowPatternHelp_Click"/>
                                    
                                    <Label Grid.Row="2" Grid.Column="0" Content="{wpf:Translate settings_primaryimageformat}"/>
                                    <ComboBox Grid.Row="2" Grid.Column="1" 
                                              ItemsSource="{Binding ImageFormats}"
                                              DisplayMemberPath="Description"
                                              SelectedValuePath="Value"
                                              SelectedValue="{Binding CoreConfiguration.OutputFileFormat, Mode=TwoWay}"/>
                                </Grid>
                                
                                <CheckBox Content="{wpf:Translate settings_copypathtoclipboard}"
                                          IsChecked="{Binding CoreConfiguration.OutputFileCopyPathToClipboard, Mode=TwoWay}"/>
                            </StackPanel>
                        </GroupBox>
                        
                        <GroupBox Header="{wpf:Translate settings_qualitysettings}">
                            <StackPanel>
                                <Grid Margin="0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="70"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="{wpf:Translate settings_jpegquality}"/>
                                    <Slider Grid.Column="1" 
                                            Minimum="0" Maximum="100" 
                                            TickFrequency="10" 
                                            IsSnapToTickEnabled="True"
                                            Value="{Binding CoreConfiguration.OutputFileJpegQuality, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    <TextBox Grid.Column="2" 
                                             Text="{Binding CoreConfiguration.OutputFileJpegQuality, Mode=OneWay, StringFormat={}{0}%}" 
                                             IsReadOnly="True"
                                             TextAlignment="Center"/>
                                </Grid>
                                
                                <CheckBox Content="{wpf:Translate settings_alwaysshowqualitydialog}"
                                          IsChecked="{Binding CoreConfiguration.OutputFilePromptQuality, Mode=TwoWay}"/>
                                <CheckBox Content="{wpf:Translate settings_reducecolors}"
                                          IsChecked="{Binding CoreConfiguration.OutputFileReduceColors, Mode=TwoWay}"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- Destinations Tab -->
            <TabItem Header="{wpf:Translate settings_destination}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <GroupBox Header="{wpf:Translate settings_destination}">
                        <StackPanel>
                            <CheckBox Content="{wpf:Translate settings_destination_picker}"
                                      IsChecked="{Binding PickerSelected, Mode=TwoWay}"
                                      Margin="5"/>
                            <ListView ItemsSource="{Binding Destinations}"
                                      Height="250"
                                      Margin="5">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Width="50">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                                              IsEnabled="{Binding DataContext.PickerSelected, RelativeSource={RelativeSource AncestorType=ListView}, Converter={StaticResource InverseBooleanConverter}}"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                        <GridViewColumn Header="{wpf:Translate settings_destination}" Width="330" DisplayMemberBinding="{Binding Description}"/>
                                    </GridView>
                                </ListView.View>
                            </ListView>
                        </StackPanel>
                    </GroupBox>
                </ScrollViewer>
            </TabItem>
            
            <!-- Editor Tab -->
            <TabItem Header="{wpf:Translate settings_editor}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="{wpf:Translate settings_editor}">
                            <StackPanel>
                                <CheckBox Content="{wpf:Translate editor_match_capture_size}"
                                          IsChecked="{Binding EditorConfiguration.MatchSizeToCapture, Mode=TwoWay}"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- Printer Tab -->
            <TabItem Header="{wpf:Translate settings_printer}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="{wpf:Translate settings_printoptions}">
                            <StackPanel>
                                <CheckBox Content="{wpf:Translate settings_alwaysshowprintoptionsdialog}"
                                          IsChecked="{Binding CoreConfiguration.OutputPrintPromptOptions, Mode=TwoWay}"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- Plugin Tab -->
            <TabItem Header="{wpf:Translate settings_plugins}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="{wpf:Translate settings_plugins}">
                            <ItemsControl ItemsSource="{Binding PluginControls}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <ContentControl Content="{Binding}"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- Expert Tab -->
            <TabItem Header="{wpf:Translate expertsettings}"
                     Visibility="{Binding ExpertModeEnabled, Converter={StaticResource ExpertVisibilityConverter}}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="{wpf:Translate expertsettings}">
                            <StackPanel>
                                <CheckBox Content="{wpf:Translate expertsettings_enableexpert}"
                                          IsChecked="{Binding ExpertModeEnabled, Mode=TwoWay}"/>
                                
                                <CheckBox Content="{wpf:Translate expertsettings_autoreducecolors}"
                                          IsChecked="{Binding CoreConfiguration.OutputFileAutoReduceColors, Mode=TwoWay}"
                                          IsEnabled="{Binding ExpertModeEnabled}"/>
                                
                                <CheckBox Content="{wpf:Translate expertsettings_optimizeforrdp}"
                                          IsChecked="{Binding CoreConfiguration.OptimizeForRDP, Mode=TwoWay}"
                                          IsEnabled="{Binding ExpertModeEnabled}"/>
                                
                                <CheckBox Content="{wpf:Translate expertsettings_thumbnailpreview}"
                                          IsChecked="{Binding CoreConfiguration.ThumnailPreview, Mode=TwoWay}"
                                          IsEnabled="{Binding ExpertModeEnabled}"/>
                                
                                <CheckBox Content="{wpf:Translate expertsettings_suppresssavedialogatclose}"
                                          IsEnabled="{Binding ExpertModeEnabled}"/>
                                
                                <CheckBox Content="{wpf:Translate expertsettings_checkunstableupdates}"
                                          IsChecked="{Binding CoreConfiguration.CheckForUnstable, Mode=TwoWay}"
                                          IsEnabled="{Binding ExpertModeEnabled}"/>
                                
                                <CheckBox Content="{wpf:Translate expertsettings_minimizememoryfootprint}"
                                          IsChecked="{Binding CoreConfiguration.MinimizeWorkingSetSize, Mode=TwoWay}"
                                          IsEnabled="{Binding ExpertModeEnabled}"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
        
        <!-- Buttons -->
        <StackPanel Grid.Row="1" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,10,0,0">
            <Button Content="{wpf:Translate OK}" 
                    Width="75" 
                    Margin="5,0"
                    IsDefault="True"
                    Click="OkButton_Click"/>
            <Button Content="{wpf:Translate CANCEL}" 
                    Width="75"
                    IsCancel="True"
                    Click="CancelButton_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
